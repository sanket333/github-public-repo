{"ast":null,"code":"import { getUserAgent } from 'universal-user-agent';\nimport { request } from '@octokit/request';\nimport { createDeviceCode, exchangeDeviceCode } from '@octokit/oauth-methods';\nasync function getOAuthAccessToken(state, options) {\n  const cachedAuthentication = getCachedAuthentication(state, options.auth);\n  if (cachedAuthentication) return cachedAuthentication;\n  // Step 1: Request device and user codes\n  // https://docs.github.com/en/developers/apps/authorizing-oauth-apps#step-1-app-requests-the-device-and-user-verification-codes-from-github\n  const {\n    data: verification\n  } = await createDeviceCode({\n    clientType: state.clientType,\n    clientId: state.clientId,\n    request: options.request || state.request,\n    // @ts-expect-error the extra code to make TS happy is not worth it\n    scopes: options.auth.scopes || state.scopes\n  });\n  // Step 2: User must enter the user code on https://github.com/login/device\n  // See https://docs.github.com/en/developers/apps/authorizing-oauth-apps#step-2-prompt-the-user-to-enter-the-user-code-in-a-browser\n  await state.onVerification(verification);\n  // Step 3: Exchange device code for access token\n  // See https://docs.github.com/en/developers/apps/authorizing-oauth-apps#step-3-app-polls-github-to-check-if-the-user-authorized-the-device\n  const authentication = await waitForAccessToken(options.request || state.request, state.clientId, state.clientType, verification);\n  state.authentication = authentication;\n  return authentication;\n}\nfunction getCachedAuthentication(state, auth) {\n  if (auth.refresh === true) return false;\n  if (!state.authentication) return false;\n  if (state.clientType === \"github-app\") {\n    return state.authentication;\n  }\n  const authentication = state.authentication;\n  const newScope = (\"scopes\" in auth && auth.scopes || state.scopes).join(\" \");\n  const currentScope = authentication.scopes.join(\" \");\n  return newScope === currentScope ? authentication : false;\n}\nasync function wait(seconds) {\n  await new Promise(resolve => setTimeout(resolve, seconds * 1000));\n}\nasync function waitForAccessToken(request, clientId, clientType, verification) {\n  try {\n    const options = {\n      clientId,\n      request,\n      code: verification.device_code\n    };\n    // WHY TYPESCRIPT WHY ARE YOU DOING THIS TO ME\n    const {\n      authentication\n    } = clientType === \"oauth-app\" ? await exchangeDeviceCode({\n      ...options,\n      clientType: \"oauth-app\"\n    }) : await exchangeDeviceCode({\n      ...options,\n      clientType: \"github-app\"\n    });\n    return {\n      type: \"token\",\n      tokenType: \"oauth\",\n      ...authentication\n    };\n  } catch (error) {\n    // istanbul ignore if\n    // @ts-ignore\n    if (!error.response) throw error;\n    // @ts-ignore\n    const errorType = error.response.data.error;\n    if (errorType === \"authorization_pending\") {\n      await wait(verification.interval);\n      return waitForAccessToken(request, clientId, clientType, verification);\n    }\n    if (errorType === \"slow_down\") {\n      await wait(verification.interval + 5);\n      return waitForAccessToken(request, clientId, clientType, verification);\n    }\n    throw error;\n  }\n}\nasync function auth(state, authOptions) {\n  return getOAuthAccessToken(state, {\n    auth: authOptions\n  });\n}\nasync function hook(state, request, route, parameters) {\n  let endpoint = request.endpoint.merge(route, parameters);\n  // Do not intercept request to retrieve codes or token\n  if (/\\/login\\/(oauth\\/access_token|device\\/code)$/.test(endpoint.url)) {\n    return request(endpoint);\n  }\n  const {\n    token\n  } = await getOAuthAccessToken(state, {\n    request,\n    auth: {\n      type: \"oauth\"\n    }\n  });\n  endpoint.headers.authorization = `token ${token}`;\n  return request(endpoint);\n}\nconst VERSION = \"4.0.4\";\nfunction createOAuthDeviceAuth(options) {\n  const requestWithDefaults = options.request || request.defaults({\n    headers: {\n      \"user-agent\": `octokit-auth-oauth-device.js/${VERSION} ${getUserAgent()}`\n    }\n  });\n  const {\n    request: request$1 = requestWithDefaults,\n    ...otherOptions\n  } = options;\n  const state = options.clientType === \"github-app\" ? {\n    ...otherOptions,\n    clientType: \"github-app\",\n    request: request$1\n  } : {\n    ...otherOptions,\n    clientType: \"oauth-app\",\n    request: request$1,\n    scopes: options.scopes || []\n  };\n  if (!options.clientId) {\n    throw new Error('[@octokit/auth-oauth-device] \"clientId\" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');\n  }\n  if (!options.onVerification) {\n    throw new Error('[@octokit/auth-oauth-device] \"onVerification\" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');\n  }\n  // @ts-ignore too much for tsc / ts-jest ¯\\_(ツ)_/¯\n  return Object.assign(auth.bind(null, state), {\n    hook: hook.bind(null, state)\n  });\n}\nexport { createOAuthDeviceAuth };","map":{"version":3,"names":["getOAuthAccessToken","state","options","cachedAuthentication","getCachedAuthentication","auth","data","verification","createDeviceCode","clientType","clientId","request","scopes","onVerification","authentication","waitForAccessToken","refresh","newScope","join","currentScope","wait","seconds","Promise","resolve","setTimeout","code","device_code","exchangeDeviceCode","type","tokenType","error","response","errorType","interval","authOptions","hook","route","parameters","endpoint","merge","test","url","token","headers","authorization","VERSION","createOAuthDeviceAuth","requestWithDefaults","defaults","getUserAgent","request$1","otherOptions","Error","Object","assign","bind"],"sources":["/home/lenovo/Documents/personal/redux_cart/gihub-repo/node_modules/@octokit/auth-oauth-device/dist-src/get-oauth-access-token.js","/home/lenovo/Documents/personal/redux_cart/gihub-repo/node_modules/@octokit/auth-oauth-device/dist-src/auth.js","/home/lenovo/Documents/personal/redux_cart/gihub-repo/node_modules/@octokit/auth-oauth-device/dist-src/hook.js","/home/lenovo/Documents/personal/redux_cart/gihub-repo/node_modules/@octokit/auth-oauth-device/dist-src/version.js","/home/lenovo/Documents/personal/redux_cart/gihub-repo/node_modules/@octokit/auth-oauth-device/dist-src/index.js"],"sourcesContent":["import { createDeviceCode, exchangeDeviceCode } from \"@octokit/oauth-methods\";\nexport async function getOAuthAccessToken(state, options) {\n    const cachedAuthentication = getCachedAuthentication(state, options.auth);\n    if (cachedAuthentication)\n        return cachedAuthentication;\n    // Step 1: Request device and user codes\n    // https://docs.github.com/en/developers/apps/authorizing-oauth-apps#step-1-app-requests-the-device-and-user-verification-codes-from-github\n    const { data: verification } = await createDeviceCode({\n        clientType: state.clientType,\n        clientId: state.clientId,\n        request: options.request || state.request,\n        // @ts-expect-error the extra code to make TS happy is not worth it\n        scopes: options.auth.scopes || state.scopes,\n    });\n    // Step 2: User must enter the user code on https://github.com/login/device\n    // See https://docs.github.com/en/developers/apps/authorizing-oauth-apps#step-2-prompt-the-user-to-enter-the-user-code-in-a-browser\n    await state.onVerification(verification);\n    // Step 3: Exchange device code for access token\n    // See https://docs.github.com/en/developers/apps/authorizing-oauth-apps#step-3-app-polls-github-to-check-if-the-user-authorized-the-device\n    const authentication = await waitForAccessToken(options.request || state.request, state.clientId, state.clientType, verification);\n    state.authentication = authentication;\n    return authentication;\n}\nfunction getCachedAuthentication(state, auth) {\n    if (auth.refresh === true)\n        return false;\n    if (!state.authentication)\n        return false;\n    if (state.clientType === \"github-app\") {\n        return state.authentication;\n    }\n    const authentication = state.authentication;\n    const newScope = ((\"scopes\" in auth && auth.scopes) || state.scopes).join(\" \");\n    const currentScope = authentication.scopes.join(\" \");\n    return newScope === currentScope ? authentication : false;\n}\nasync function wait(seconds) {\n    await new Promise((resolve) => setTimeout(resolve, seconds * 1000));\n}\nasync function waitForAccessToken(request, clientId, clientType, verification) {\n    try {\n        const options = {\n            clientId,\n            request,\n            code: verification.device_code,\n        };\n        // WHY TYPESCRIPT WHY ARE YOU DOING THIS TO ME\n        const { authentication } = clientType === \"oauth-app\"\n            ? await exchangeDeviceCode({\n                ...options,\n                clientType: \"oauth-app\",\n            })\n            : await exchangeDeviceCode({\n                ...options,\n                clientType: \"github-app\",\n            });\n        return {\n            type: \"token\",\n            tokenType: \"oauth\",\n            ...authentication,\n        };\n    }\n    catch (error) {\n        // istanbul ignore if\n        // @ts-ignore\n        if (!error.response)\n            throw error;\n        // @ts-ignore\n        const errorType = error.response.data.error;\n        if (errorType === \"authorization_pending\") {\n            await wait(verification.interval);\n            return waitForAccessToken(request, clientId, clientType, verification);\n        }\n        if (errorType === \"slow_down\") {\n            await wait(verification.interval + 5);\n            return waitForAccessToken(request, clientId, clientType, verification);\n        }\n        throw error;\n    }\n}\n","import { getOAuthAccessToken } from \"./get-oauth-access-token\";\nexport async function auth(state, authOptions) {\n    return getOAuthAccessToken(state, {\n        auth: authOptions,\n    });\n}\n","import { getOAuthAccessToken } from \"./get-oauth-access-token\";\nexport async function hook(state, request, route, parameters) {\n    let endpoint = request.endpoint.merge(route, parameters);\n    // Do not intercept request to retrieve codes or token\n    if (/\\/login\\/(oauth\\/access_token|device\\/code)$/.test(endpoint.url)) {\n        return request(endpoint);\n    }\n    const { token } = await getOAuthAccessToken(state, {\n        request,\n        auth: { type: \"oauth\" },\n    });\n    endpoint.headers.authorization = `token ${token}`;\n    return request(endpoint);\n}\n","export const VERSION = \"4.0.4\";\n","import { getUserAgent } from \"universal-user-agent\";\nimport { request as octokitRequest } from \"@octokit/request\";\nimport { auth } from \"./auth\";\nimport { hook } from \"./hook\";\nimport { VERSION } from \"./version\";\nexport function createOAuthDeviceAuth(options) {\n    const requestWithDefaults = options.request ||\n        octokitRequest.defaults({\n            headers: {\n                \"user-agent\": `octokit-auth-oauth-device.js/${VERSION} ${getUserAgent()}`,\n            },\n        });\n    const { request = requestWithDefaults, ...otherOptions } = options;\n    const state = options.clientType === \"github-app\"\n        ? {\n            ...otherOptions,\n            clientType: \"github-app\",\n            request,\n        }\n        : {\n            ...otherOptions,\n            clientType: \"oauth-app\",\n            request,\n            scopes: options.scopes || [],\n        };\n    if (!options.clientId) {\n        throw new Error('[@octokit/auth-oauth-device] \"clientId\" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');\n    }\n    if (!options.onVerification) {\n        throw new Error('[@octokit/auth-oauth-device] \"onVerification\" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');\n    }\n    // @ts-ignore too much for tsc / ts-jest ¯\\_(ツ)_/¯\n    return Object.assign(auth.bind(null, state), {\n        hook: hook.bind(null, state),\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}